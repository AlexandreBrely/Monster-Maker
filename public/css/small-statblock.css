/* ===== SMALL MONSTER STATBLOCK STYLES ===== */

/*
 * PLAYING CARD FORMAT - Portrait Orientation
 * ============================================
 * 
 * DIMENSIONS: 2.5" × 3.5" (63mm × 88mm) - Standard playing card size
 * PURPOSE: Compact monster stats for easy reference during gameplay
 * 
 * STRUCTURE:
 *   .card-display-wrapper               // Container for front + back
 *     ├─ .statblock                      // FRONT: Stats and abilities
 *     │   ├─ .statblock-header           // Name, type, CR
 *     │   ├─ .statblock-top              // Core stats section
 *     │   │   ├─ .basic-stats            // Primary stats bar
 *     │   │   ├─ .ability-grid           // 6 ability scores
 *     │   │   └─ .skills-secondary       // Skills, senses, etc.
 *     │   └─ .statblock-body             // Actions, reactions
 *     └─ .card-back                      // BACK: Monster image
 * 
 * LAYOUT STRATEGY:
 * - Fixed dimensions prevent overflow issues
 * - Flex column for vertical stacking
 * - Tight spacing to maximize content density
 * - Smart font sizing for readability vs. space
 * 
 * PRINT OPTIMIZATION:
 * - 3px border for durability (thick enough to handle)
 * - 6px padding protects content when trimming
 * - 4px margin creates safe cut area
 * - White background for standard paper printing
 */

/* === CONTAINER: FRONT + BACK CARD WRAPPER === */

/*
 * Flexbox container displaying front and back cards side-by-side
 * LAYOUT: Horizontal flex with centered alignment
 * GAP: 30px provides clear visual separation
 * RESPONSIVE: Stack vertically on mobile (handled elsewhere)
 */
.card-display-wrapper {
    display: flex;
    gap: 30px;                       /* 30px space between front and back */
    align-items: flex-start;         /* Align to top */
    justify-content: center;         /* Center horizontally */
    margin: 0 auto;
    padding: 0 20px;
    max-width: 100%;
}

/* === BACK CARD: MONSTER IMAGE === */

/*
 * Right-side card displaying monster's full-body portrait
 * 
 * DIMENSIONS: 2.5" × 3.5" (matches front card)
 * PURPOSE: Visual reference for monster appearance
 * 
 * IMAGE HANDLING:
 * - object-fit: cover - Crops image to fill card while maintaining aspect
 * - object-position: center - Centers the image within crop area
 * - Prioritizes keeping monster's head/torso visible
 * 
 * FALLBACK: Shows icon placeholder if no image uploaded
 */
.card-back {
    background: #fff;
    border: 1px solid #000000;       /* Outer cut guide */
    border-radius: 8px;              /* Softer rounded corners */
    width: 2.5in;                    /* Playing card width (63mm) */
    height: 3.5in;                   /* Playing card height (88mm) */
    display: inline-flex;
    flex-direction: column;
    vertical-align: top;
    overflow: hidden;                /* Crop images exceeding dimensions */
    position: relative;
    box-shadow: none;                /* Match front card (no shadow) */
    padding: 6px;                    /* Match front card padding */
    margin: 4px;                     /* Match front card margin */
    box-sizing: border-box;          /* Include border in dimensions */
}

.card-back::before {
    content: "";
    position: absolute;
    inset: 2px;                      /* 1px border + 1px gap */
    border: 1px solid #000000;       /* Inner cut guide */
    border-radius: 6px;
    pointer-events: none;
    box-sizing: border-box;
}

/*
 * Monster portrait image inside back card
 * CROPPING STRATEGY:
 * - object-fit: cover - Fills entire card area
 * - object-position: center center - Centers the crop
 * - Alternative: 'center top' prioritizes head/face
 * 
 * ASPECT RATIO HANDLING:
 * - Wide images: Crops left/right edges
 * - Tall images: Crops top/bottom edges
 * - Square images: Crops to fit portrait orientation
 */
.card-back-image {
    width: 100%;
    height: 100%;
    object-fit: cover;  /* Crops image to fill card while maintaining aspect ratio */
    object-position: center center;  /* Centers the image, adjust to 'center top' if you want to prioritize head/top */
}

/* Placeholder when no portrait image exists */
.card-back-placeholder {
    width: 100%;
    height: 100%;
    background: #f5f5f5;
    display: flex;
    align-items: center;
    justify-content: center;
    color: #ccc;
    font-size: 3.05rem;
}

/* === FRONT CARD: MONSTER STATBLOCK === */

/*
 * Main statblock container - Playing card dimensions
 * 
 * DIMENSIONS: 2.5" × 3.5" (63mm × 88mm)
 * STANDARD: Same size as poker/bridge playing cards
 * 
 * SPACE OPTIMIZATION:
 * - Small font sizes (0.70rem base)
 * - Tight padding (6px)
 * - Zero margins on internal elements
 * - Flex column layout for efficient stacking
 * 
 * PRINT CONSIDERATIONS:
 * - 3px border: Thick enough for durability
 * - 6px padding: Protects content during trimming
 * - 4px margin: Safe cutting area
 * - box-sizing: border-box ensures exact dimensions
 * 
 * OVERFLOW HANDLING:
 * - overflow: hidden prevents content escape
 * - Fixed height enforces dimension constraints
 * - Designer must ensure content fits (or use smaller fonts)
 */
.small-statblock,
.statblock {
    background: #fff;
    border: 1px solid #000000;    /* Outer cut guide */
    border-radius: 8px;
    padding: 6px;      /* Inner padding to protect content when trimming/handling */
    width: 2.5in;    /* Playing card width  63 mm*/
    height: 3.5in;   /* Playing card height 88 mm*/
    margin: 4px;     /* Small margin for print safety */
    font-family: "Nunito", sans-serif;
    box-shadow: none;
    overflow: hidden;
    font-size: 0.70rem;  /* Base font size for entire card */
    display: inline-flex;
    flex-direction: column;
    vertical-align: top;
    box-sizing: border-box;
    position: relative;
}

.small-statblock::before,
.statblock::before {
    content: "";
    position: absolute;
    inset: 2px;                      /* 1px border + 1px gap */
    border: 1px solid #000000;       /* Inner cut guide */
    border-radius: 6px;
    pointer-events: none;
    box-sizing: border-box;
}

/* Override natural element margins for compact display */
.statblock p, .statblock h3, .statblock h6 {
    margin: 0;      /* Remove all natural margins */
    padding: 0;     /* Remove all natural padding */
}

/* ===== HEADER SECTION (Monster Name, Type, CR/XP) ===== */
/* Grid layout: [Name/Subtitle on left] [CR/XP on right] */
.statblock-header {
    display: grid;
    grid-template-columns: 1fr auto;
    align-items: center;
    column-gap: 2px;
    border-bottom: 1px solid #ddd;
    padding: 3px 2px 0px 1px;  /* Added top padding for breathing room */
    margin-bottom: 0;
}

/* MONSTER NAME - Main title at top of card */
.statblock-title {
    font-size: 0.54rem;    /* Slightly bigger than section titles */
    font-weight: 550;
    color: #000;
    margin: 2px;
    text-align: left;
    font-family: "New Rocker", system-ui;
}

/* MONSTER TYPE/SIZE/ALIGNMENT - Subtitle under name */
.statblock-subtitle {
    font-size: 0.39rem;    /* Compact subtitle */
    font-style: italic;
    color: #555;
    margin: 0px 0 2px 0;   /* Added bottom margin for breathing room */
    text-align: left;
    padding: 0;
    line-height: 1.0;
}

/* CR AND XP - Right side of header */
.header-cr {
    font-size: 0.53rem;    /* Tighter CR */
    font-weight: 700;
    color: #333;
    text-align: right;
}
.header-cr small {
    font-size: 0.45rem;    /* Tighter XP */
    font-weight: 600;
    color: #666;
}

/* ===== QUICK STATS BAR: AC, HP, Speed, Initiative (2x2 Grid) ===== */
/* Grid layout using Bootstrap: Row 1 (AC | Initiative), Row 2 (HP | Speed) */
.statblock-stats {
    /* Container for grid rows - let Bootstrap grid do the layout */
    display: block;
    margin-top: 0px;
    margin-bottom: 0px;
    font-size: 0.41rem;  /* Slightly larger for readability */
    font-weight: 500;
}

.stat-line {
    display: flex;
    align-items: baseline;
    gap: 3px;  /* Better spacing within each stat group */
}

/* Optional: Add slight margins between grid items */
.statblock-stats .ac-block { margin-left: 2px; }
.statblock-stats .hp-block { margin-left: 2px; }
.statblock-stats .initiative-block { margin-right: 2px; }
.statblock-stats .speed-block { margin-right: 2px; }

/* Bootstrap grid row and column styles override */
.statblock-stats .row {
    margin-left: 0;
    margin-right: 0;
}

.statblock-stats .col-6 {
    padding-left: 2px;
    padding-right: 2px;
}

/* AC LABEL - "AC" text */
.stat-label {
    font-weight: 700;
    color: #333;
    font-size: 0.41rem;    /* Labels aligned to stat size */
}

/* AC VALUE - "15" number */
.stat-value {
    font-size: 0.41rem;    /* Values aligned to stat size */
    font-weight: 600;
    color: #333;
}

/* HP DETAIL - "(7d10+14)" or "Speed 40 ft." detail text / AC Notes */
.stat-detail {
    font-size: 0.35rem;    /* Notes smaller than labels/values */
    font-weight: 400;
    color: #666;
}

/* ===== MAIN CONTENT CONTAINER ===== */
/* Wrapper for all content sections below header */
.statblock-container {
    display: flex;
    flex-direction: column;
    flex: 1 1 auto;
    min-height: 0;            /* Allow flex children to shrink within fixed card height */
    padding: 4px 6px;  /* Added breathing room within the safer border */
}

/* ===== LEFT COLUMN: Ability Scores & Details ===== */
.statblock-left {
    display: flex;
    flex-direction: column;
    gap: 0px;  /* No gap between sections */
    flex-shrink: 0;          /* Prevent compression of top stats/details */
}

.statblock-top {
    display: flex;
    flex-direction: column;
    gap: 2px;               /* Light spacing between top blocks */
}

.basic-stats {
    display: flex;
    flex-direction: column;
    gap: 3px;              /* Tight grouping of primary stats and abilities */
}

.skills-secondary {
    margin-top: 2px;
    display: flex;
    flex-direction: column;
    gap: 0px;
}

.skills-secondary .detail-item {
    display: grid;
    grid-template-columns: auto 1fr;
    align-items: start;
    column-gap: 4px;
}

.skills-secondary .detail-label {
    margin-right: 0;
}

/* === ABILITY SCORE GRID === */

/*
 * 6-column grid displaying D&D 5e ability scores
 * 
 * LAYOUT: Equal-width columns for STR, DEX, CON, INT, WIS, CHA
 * DISPLAY FORMAT:
 *   STR  DEX  CON  INT  WIS  CHA
 *   +2   +3   +1   -1   +0   +4
 * 
 * SAVE BONUS INDICATOR:
 * When monster has saving throw proficiency, shows as: +2 /+5
 * - First number: Ability modifier (always shown)
 * - Second number: Total save bonus (modifier + proficiency)
 * - Gray color differentiates save bonus from modifier
 * 
 * SPACING:
 * - 1px gap: Minimal space, maximum density
 * - Center-aligned: Clean, organized appearance
 * - Stacked vertically: Label above value
 */
.ability-grid {
    display: grid;
    grid-template-columns: repeat(6, 1fr);
    gap: 1px;      /* Minimal space between ability columns */
    text-align: center;
    margin: 0px 0;
}

.ability-box {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 1px;
}

/* ABILITY NAMES - "STR", "DEX", "CON", etc. */
.ability-name {
    font-weight: 700;
    font-size: 0.45rem;    /* Ability abbreviation size */
    color: #333;
    letter-spacing: 0.1px;
}

/* ABILITY MODIFIERS - The numbers under ability names like "+2", "-1" */
.ability-mod {
    font-size: 0.45rem;    /* Match ability label size */
    font-weight: 700;
    color: #333;
}

/* SAVE BONUS - Displayed as " /+5" after ability modifier when monster has save proficiency */
.save-bonus {
    font-size: 0.45rem;
    font-weight: 700;
    color: #666;           /* Grey color to differentiate from modifier */
    vertical-align: baseline;
}

/* === DETAILS SECTION === */

/*
 * Secondary information displayed in compact rows
 * 
 * CONTENT TYPES:
 * - Skills: Proficiency and expertise bonuses
 * - Senses: Darkvision, blindsight, passive Perception
 * - Damage Immunities: Complete damage negation
 * - Damage Resistances: Half damage
 * - Damage Vulnerabilities: Double damage
 * - Condition Immunities: Status effect immunities
 * - Languages: Communication capabilities
 * 
 * LAYOUT STRATEGY:
 * - Label: Bold, slightly larger (0.47rem)
 * - Value: Normal weight, smaller (0.37rem)
 * - No gaps: Maximize content density
 * - Ultra-tight line-height (1.05): Fit more rows
 * 
 * TYPOGRAPHY HIERARCHY:
 * - Labels stand out with bold weight
 * - Values are readable but compact
 * - Different sizes create visual separation
 */
.statblock-details {
    display: flex;
    flex-direction: column;
    gap: 0px;      /* No space between detail rows */
    font-size: 0.37rem;  /* Smaller detail text */
    line-height: 1.05;   /* Slightly more breathing room */
    margin-top: 0px;
}

/* Individual detail row (one line for Skills, Senses, etc.) */
.detail-item {
    line-height: 1.05;  /* Ultra-tight */
    margin-bottom: 0px;
}

/* DETAIL LABELS - "Skills:", "Immune:", "Resist:", "Vuln:", "Cond. Immune:", "Senses:", "Languages:" */
/* These are the bold labels that appear before the values */
.detail-label {
    font-weight: 700;  /* Bolder */
    font-style: normal;  /* Remove italic */
    text-decoration: none;
    color: #333;
    font-size: 0.47rem;  /* Slightly larger than detail text */
    margin-right: 3px;
}

/* ===== DIVIDERS ===== */
/* Horizontal line separators between sections */
.statblock-divider {
    height: 1px;      /* Line thickness */
    background: #ddd; /* Line color */
    margin: 1px 0;    /* Space above/below divider */
}

.ability-grid-divider {
    height: 1px;
    background: #ddd;
    margin: 1px 0 0 0;
}

/* ===== RIGHT COLUMN: Actions, Traits, Reactions ===== */
.statblock-right {
    display: block;
    margin-top: auto;        /* Push actions block down when space allows */
    flex-shrink: 0;          /* Keep bottom sections from squashing */
}

/* ===== SECTION STYLING ===== */
/* Container for each action/reaction/trait block */
.statblock-section {
    display: flex;
    flex-direction: column;
    gap: 0px;          /* No gap between title and entries */
    margin-bottom: 1px; /* Space after each section block */
}

.section-block {
    display: flex;
    flex-direction: column;
    gap: 2px;          /* Space between title and its list */
    margin-top: 6px;   /* Separation between consecutive sections */
}

/* ===== SECTION TITLES: "ACTIONS", "BONUS ACTIONS", "REACTIONS", "TRAITS" ===== */
/* Titles with a centered divider after text */
.section-title {
    font-size: 0.43rem;     /* Slightly smaller for better proportion */
    font-weight: 500;       /* Lighter weight for less imposing look */
    color: #333;
    background: transparent;
    margin: 14px 0 0px 0;   /* Increased top margin for clearer separation */
    padding: 0;
    text-transform: uppercase;
    letter-spacing: 0.2px;
    display: flex;
    align-items: center;
    gap: 4px;
    white-space: nowrap;
}

.section-title::after {
    content: '';
    flex: 1;
    height: 1px;
    background: #c0c0c0;
}

/* ===== ACTION/TRAIT ENTRIES ===== */
/* Individual action, bonus action, reaction, or trait entry */
.trait-entry, .action-entry {
    line-height: 1.05;      /* Tighter line spacing */
    margin-bottom: 0px;     /* No space between entries */
}

/* ===== ACTION/TRAIT NAME ===== */
/* The bold title of the action: "Multiattack", "Fireball", "Parry" etc. */
.entry-title {
    font-weight: 700;      /* Bold */
    font-style: italic;
    color: #333;
    font-size: 0.51rem;    /* Action/trait names - readable */
}

/* ===== ACTION/TRAIT DESCRIPTION TEXT ===== */
/* The description that follows the title: "The creature can make..." */
.entry-text {
    color: #333;
    font-size: 0.43rem;     /* Description text */
    line-height: 1.15;      /* Roomier for readability */
}

.legendary-intro {
    font-size: 0.67rem;
    color: #333;
    margin-bottom: 3px;
    line-height: 1.25;
}

/* ===== PRINT STYLES ===== */
/* Optimized styling for printing to actual cards */
@media print {
    body {
        background: white;
    }

    /* Hide buttons when printing */
    .action-buttons-bar {
        display: none !important;
    }

    .no-print {
        display: none !important;
    }

    /* Print layout: both cards on one line, then page break */
    .card-display-wrapper {
        display: flex;
        gap: 0.25in;    /* Gap between front and back cards when printing */
        page-break-inside: avoid;
    }

    /* Card dimensions and print-specific styling */
    .statblock,
    .card-back {
        border: 1px solid #999;
        box-shadow: none;
        page-break-inside: avoid;
        width: 2.5in;    /* Playing card width 63 mm */
        height: 3.5in;   /* Playing card height 88 mm*/
        margin: 0;
        padding: 0;
    }

    .statblock-container {
        padding: 4px 8px;
    }

    .statblock-divider {
        background: #999;  /* Darker divider lines when printed */
    }

    /* Page setup: 5.5in wide × 3.5in tall fits both cards (2.5 + 0.25 + 2.5) */
    @page {
        size: 5.5in 3.5in;  /* Custom page size for card printing */
        margin: 0.25in;      /* Margin around edge of printed page */
    }

    h1, h2, h3 {
        page-break-after: avoid;
    }

    .statblock-section {
        page-break-inside: avoid;
        margin-bottom: 6px;
    }
}

/* ===== RESPONSIVE DESIGN (Mobile/Tablet) ===== */
@media (max-width: 768px) {
    .statblock-container {
        grid-template-columns: 1fr;
    }

    .statblock-portrait {
        margin: 15px 0;
    }

    .statblock {
        padding: 15px;
    }

    .section-title {
        font-size: 1.03rem;
    }
}
